<p>Chose which of the available Webclips you want to have displayed on this page: </p><br/>
<h4>Available Webclips</h4>
<div class="sortable1_wrapper">
<ul id="sortable1" class="connectedSortable">
  <% @available_webclips.each do |webclip| %>
  <li class="ui-state-default">
    <%= hidden_field_tag 'page[webclip_ids][]', webclip.id, id: "page_webclip_id_#{Time.now.to_i}" %>

    <%= image_base_64_tag(webclip.webclip_icon)%>
    <h5><%= webclip.name %></h5>
  </li>
  <% end %>
</ul>
</div>
<br/>
<h4>Webclips on Page "<%= @page.name %>"</h4>
<%#= debug @page.webclips %>
<%= form_tag [:admin, @page], method: 'put' do %>
<div class="sortable2_wrapper">
<ul id="sortable2" class="connectedSortable">
<% @page.webclips.each do |webclip| %>
  <li class="ui-state-default">
    <%= hidden_field_tag 'page[webclip_ids][]', webclip.id, id: "page_webclip_id_#{Time.now.to_i}" %>
    <%= image_base_64_tag(webclip.webclip_icon)%>
    <h5><%= webclip.name %></h5>
  </li>
<% end %>
</ul>
</div>
<br/>
<%= submit_tag 'Save', class: 'btn btn-default' %>
<% end %>

<% content_for :javascript_per_page do %>
<script type="text/javascript">
$(function() {
  $( "#sortable1, #sortable2" ).sortable({
    connectWith: ".connectedSortable",
    placeholder: "sortable_placeholder"
  }).disableSelection();
});
</script>
<% end %>